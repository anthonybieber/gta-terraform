name: QA Workflow

on: push

jobs:
  merge-into-develop:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2.1.0
      - id: files
        uses: jitterbit/get-changed-files@v1
      - name: Print Changed files
        id: updated_stacks
        run : |
          arr=()
          for changed_file in ${{ steps.files.outputs.all }}; do
            if [[ $changed_file == *"stack"* ]]; then
              parsed=$(echo "$changed_file" | awk -F[//] '{print $2}' )
              arr+=("$parsed")
            fi
          done
          output_array=$(printf '%s\n' "${arr[@]}" | jq -R . | jq -s .)
          echo ::set-output name=arr::$output_array
#      - name: Create list of modified stacks
#        id: modified_stacks_list
#        uses: lucaspinheirogit/list-from-string-array-action@v1.4.3
#        with:
#          stringArray: ${{ steps.updated_stacks.outputs.arr }}
#      - name: Print modified files
#        run: echo '${{ steps.modified_stacks_list.outputs.stringList }}'
      - name: echo outputs
        run: echo ${{ steps.updated_stacks.outputs.arr }}

